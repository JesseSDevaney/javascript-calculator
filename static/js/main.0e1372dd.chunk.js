(this["webpackJsonpjavascript-calculator"]=this["webpackJsonpjavascript-calculator"]||[]).push([[0],{56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},68:function(e,t){},69:function(e,t,n){"use strict";n.r(t);var s=n(25),r=n.n(s),u=n(32),i=n.n(u),a=(n(56),n(33)),o=n(34),c=n(16),d=n(50),l=n(49),p=n(71),h=n(2),x=(n(57),n(58),n(59),n(12));var f=function(e){var t=e.cursorIndex,n=e.expression,s=e.handleChange,r=e.isInputUnfocused,u=function(e,t,n,s){var r={};return t&&(r.opacity=0),Object(x.jsx)("input",{style:r,type:"text",id:"input",value:e,onChange:n,onFocus:s,onBlur:s})}(n,r,s,e.updateFocus),i=function(e,t){var n=e.slice(0,t),s=e.slice(t);return Object(x.jsx)("div",{id:"unfocused-input-display",children:Object(x.jsxs)("pre",{children:[n,Object(x.jsx)("span",{id:"cursor",children:"|"}),s]})})}(n,t);return Object(x.jsxs)("div",{id:"input-container",children:[u,r&&i]})};var b=function(e){var t=e.calculation,n=t.expression,s=t.isMalformed,r=t.result,u=e.isInputUnfocused,i=e.cursorIndex,a=e.handleChange,o=e.restorePrevious,c=e.updateFocus,d=function(e,t){return Object(x.jsxs)("div",{id:"result-container",children:[Object(x.jsx)("div",{id:"expression",onClick:function(){o(e)},children:e}),Object(x.jsx)("div",{id:"equals",children:"="}),Object(x.jsx)("div",{id:"result",onClick:function(){o(t)},children:t})]})}(n,r);return Object(x.jsxs)("div",{id:"display",children:[""===r&&Object(x.jsx)(f,{cursorIndex:i,expression:n,isInputUnfocused:u,isMalformed:s,handleChange:a,updateFocus:c}),s&&Object(x.jsx)("pre",{id:"malformed-expression",children:"Malformed expression"}),""!==r&&d]})},j={expression:"",isMalformed:!1,result:""},v=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).state={calculation:j,cursorIndex:0,variables:{},isInputUnfocused:!0},e.executeExpression=e.executeExpression.bind(Object(c.a)(e)),e.handleFocusedInput=e.handleFocusedInput.bind(Object(c.a)(e)),e.handleUnfocusedInput=e.handleUnfocusedInput.bind(Object(c.a)(e)),e.restorePrevious=e.restorePrevious.bind(Object(c.a)(e)),e.throwMalformedError=e.throwMalformedError.bind(Object(c.a)(e)),e.updateCursorIndex=e.updateCursorIndex.bind(Object(c.a)(e)),e.updateExpression=e.updateExpression.bind(Object(c.a)(e)),e.updateFocus=e.updateFocus.bind(Object(c.a)(e)),e.updateResult=e.updateResult.bind(Object(c.a)(e)),e.updateVariables=e.updateVariables.bind(Object(c.a)(e)),e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleUnfocusedInput)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleUnfocusedInput)}},{key:"executeExpression",value:function(){var e=this.state,t=e.calculation.expression,n=e.variables,s="",r=Object.assign({},n);try{s=Object(p.a)(t,r),function(e,t){var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!0;for(var r=0,u=n;r<u.length;r++){var i=u[r];if(e[i]!==t[i])return!0}return!1}(n,r)&&this.updateVariables(r),""!==s&&this.updateResult(Object(h.me)(s,4).toString())}catch(u){console.error(u),this.throwMalformedError()}}},{key:"handleFocusedInput",value:function(e){this.updateExpression(e.target.value)}},{key:"handleUnfocusedInput",value:function(e){var t=e.key,n=this.state,s=n.calculation.result,r=n.isInputUnfocused;if("Enter"===t)""===s?(document.getElementById("input").blur(),this.executeExpression()):(this.updateCursorIndex(s.length),this.updateExpression(s));else if(function(e){return!["Shift","CapsLock","Control","Alt","Tab","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Insert","PageDown","PageUp","Pause","ScrollLock","NumLock","Escape","ArrowDown","ArrowUp"].includes(e)}(t)&&r){var u=this.state,i=u.calculation.expression,a=u.cursorIndex,o="";switch(t){case"Backspace":""!==s?(this.updateCursorIndex(0),this.updateExpression("")):0!==a&&(o=i.slice(0,a-1)+i.slice(a),this.updateCursorIndex(a-1),this.updateExpression(o));break;case"Delete":a!==i.length&&(o=i.slice(0,a)+i.slice(a+1),this.updateExpression(o));break;case"ArrowLeft":a>0&&this.updateCursorIndex(a-1),this.updateResult("");break;case"ArrowRight":a<i.length&&this.updateCursorIndex(a+1),this.updateResult("");break;case"Home":this.updateCursorIndex(0);break;case"End":this.updateCursorIndex(i.length);break;default:if(""===s)o=i.slice(0,a)+t+i.slice(a),this.updateCursorIndex(a+1),this.updateExpression(o);else{["0","1","2","3","4","5","6","7","8","9"].includes(t)?(this.updateCursorIndex(1),this.updateExpression(t)):(o=s+t,this.updateCursorIndex(o.length),this.updateExpression(o))}}}}},{key:"restorePrevious",value:function(e){this.updateCursorIndex(e.length),this.updateExpression(e)}},{key:"throwMalformedError",value:function(){this.setState((function(e){var t=e.calculation;return{calculation:Object.assign({},t,{isMalformed:!0})}}))}},{key:"updateCursorIndex",value:function(e){this.setState({cursorIndex:e})}},{key:"updateExpression",value:function(e){this.setState({calculation:{expression:e,isMalformed:!1,result:""}})}},{key:"updateFocus",value:function(e){this.setState((function(t){return{cursorIndex:e.target.selectionStart,isInputUnfocused:!t.isInputUnfocused}}))}},{key:"updateResult",value:function(e){this.setState((function(t){var n=t.calculation,s={isMalformed:!1,result:e};return{calculation:Object.assign({},n,s)}}))}},{key:"updateVariables",value:function(e){this.setState({variables:e})}},{key:"render",value:function(){var e=this.state,t=e.calculation,n=e.cursorIndex,s=e.isInputUnfocused;return Object(x.jsx)("main",{id:"calculator",children:Object(x.jsx)(b,{calculation:t,cursorIndex:n,isInputUnfocused:s,handleChange:this.handleFocusedInput,restorePrevious:this.restorePrevious,updateFocus:this.updateFocus})})}}]),n}(r.a.Component);i.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(v,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.0e1372dd.chunk.js.map