(this["webpackJsonpjavascript-calculator"]=this["webpackJsonpjavascript-calculator"]||[]).push([[0],{59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},71:function(e,t){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var s=n(21),i=n.n(s),r=n(39),a=n.n(r),u=(n(59),n(29)),o=n(30),c=n(15),l=n(34),d=n(33),p=n(75),h=(n(60),n(2)),b=(n(61),n(62),n(12));var f=function(e){var t=e.cursorIndex,n=e.expression,s=e.handleChange,i=e.isInputUnfocused,r=function(e,t,n,s){var i={};return t&&(i.opacity=0),Object(b.jsx)("input",{style:i,type:"text",id:"input",value:e,onChange:n,onFocus:s,onBlur:s})}(n,i,s,e.updateFocus),a=function(e,t){var n=e.slice(0,t),s=e.slice(t);return Object(b.jsx)("div",{id:"unfocused-input-display",children:Object(b.jsxs)("pre",{children:[n,Object(b.jsx)("span",{id:"cursor",children:"|"}),s]})})}(n,t);return Object(b.jsxs)("div",{id:"input-container",children:[r,i&&a]})};var v=function(e){var t=e.calculation,n=t.expression,s=t.isMalformed,i=t.result,r=e.isInputUnfocused,a=e.cursorIndex,u=e.handleChange,o=e.restorePrevious,c=e.updateFocus,l=function(e,t){var n=Object(h.me)(t,4).toString();return Object(b.jsxs)("div",{className:"result-container",children:[Object(b.jsx)("div",{className:"expression",onClick:function(){o(e)},children:e}),Object(b.jsx)("div",{className:"equals",children:"="}),Object(b.jsx)("div",{className:"result",onClick:function(){var e=t.toString();o(e)},children:n})]})}(n,i);return Object(b.jsxs)("div",{id:"display",children:[Object(b.jsx)("p",{id:"display-title",children:"Display"}),""===i&&Object(b.jsx)(f,{cursorIndex:a,expression:n,isInputUnfocused:r,isMalformed:s,handleChange:u,updateFocus:c}),s&&Object(b.jsx)("pre",{id:"malformed-expression",children:"Malformed expression"}),""!==i&&l]})},x=(n(72),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(u.a)(this,n),(s=t.call(this,e)).state={history:[],calculationCount:0},s.appendCalculation=s.appendCalculation.bind(Object(c.a)(s)),s.displayCalculation=s.displayCalculation.bind(Object(c.a)(s)),s.findCalculationById=s.findCalculationById.bind(Object(c.a)(s)),s.restoreExpression=s.restoreExpression.bind(Object(c.a)(s)),s.restoreResult=s.restoreResult.bind(Object(c.a)(s)),s}return Object(o.a)(n,[{key:"appendCalculation",value:function(){this.setState((function(e,t){var n=e.history.slice(),s=e.calculationCount;return n.push({id:s+1,expression:t.expression,result:t.result}),n.length>20&&n.shift(),{history:n,calculationCount:s+1}}))}},{key:"componentDidUpdate",value:function(e){var t=e.expression,n=e.result,s=this.props,i=s.expression,r=s.result;""!==r&&(r!==n||i!==t)&&this.appendCalculation(),this.scrollToBottom()}},{key:"displayCalculation",value:function(e){var t=e.id,n=e.expression,s=e.result,i=Object(h.me)(s,4).toString();return Object(b.jsxs)("div",{className:"result-container",id:"calculation"+t,children:[Object(b.jsx)("div",{className:"expression",onClick:this.restoreExpression,children:n}),Object(b.jsx)("div",{className:"equals",children:"="}),Object(b.jsx)("div",{className:"result",onClick:this.restoreResult,children:i})]},t)}},{key:"findCalculationById",value:function(e){return this.state.history.filter((function(t){var n=t.id;return e===n}))[0]}},{key:"scrollToBottom",value:function(){var e=document.getElementById("history-container");e.scrollTop=e.scrollHeight}},{key:"restoreExpression",value:function(e){var t=e.target.parentNode.id.replace("calculation","");t=parseInt(t);var n=this.findCalculationById(t).expression;this.props.restorePrevious(n)}},{key:"restoreResult",value:function(e){var t=e.target.parentNode.id.replace("calculation","");t=parseInt(t);var n=this.findCalculationById(t).result;this.props.restorePrevious(n.toString())}},{key:"render",value:function(){var e=this,t=this.props,n=t.altMenuToggled,s=t.isMobile,i=this.state.history.map((function(t){return e.displayCalculation(t)})),r={};return s?n?(r.order="2",r.height="40%"):r.display="none":(r.order="-1",r.height="20%"),Object(b.jsx)("div",{id:"history-container",style:r,children:i})}}]),n}(i.a.Component)),j=(n(73),{zero:"0",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",decimal:".",add:"+",subtract:"-",divide:"/",multiply:"*",back:"Back",clear:"C","left-parenthesis":"(","right-parenthesis":")",exponential:"^",sqrt:"sqrt(",equals:"=",evaluate:"Evaluate"}),g={zero:"0",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",decimal:".",add:"+",subtract:"-",divide:"/",multiply:"*",clear:"C",exponential:"^",sqrt:"sqrt(",equals:"=",evaluate:"Evaluate","alt-menu":"alt-menu"},m={evaluate:"Evaluate",menu:"menu","left-parenthesis":"(","right-parenthesis":")"};var y=function(e){var t=e.altMenuToggled,n=e.isMobile,s=e.sendButtonPress,i=function(e){s(e.target.id)},r=function(e,t){return t?e?m:g:j}(t,n),a={},u=function(e,t){return t?e?"mobile-alt-menu-grid":"mobile-menu-grid":"desktop-grid"}(t,n);return a.height=function(e,t){return t?e?"40%":"80%":"60%"}(t,n),Object(b.jsx)("div",{className:"button-container "+u,style:a,children:function(e){return Object.keys(e).map((function(t){if(e.hasOwnProperty(t)){var n=e[t],s={gridArea:t};return Object(b.jsx)("button",{className:"calculatorButton",id:t,style:s,onClick:i,children:n},t)}return null}))}(r)})},O={expression:"",isMalformed:!1,result:""},I=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={altMenuToggled:!1,calculation:O,cursorIndex:0,isInputUnfocused:!0,isMobile:!1,variables:{}},e.executeExpression=e.executeExpression.bind(Object(c.a)(e)),e.handleButtonPress=e.handleButtonPress.bind(Object(c.a)(e)),e.handleFocusedInput=e.handleFocusedInput.bind(Object(c.a)(e)),e.handleUnfocusedInput=e.handleUnfocusedInput.bind(Object(c.a)(e)),e.restorePrevious=e.restorePrevious.bind(Object(c.a)(e)),e.setMobile=e.setMobile.bind(Object(c.a)(e)),e.throwMalformedError=e.throwMalformedError.bind(Object(c.a)(e)),e.updateCursorIndex=e.updateCursorIndex.bind(Object(c.a)(e)),e.updateExpression=e.updateExpression.bind(Object(c.a)(e)),e.updateFocus=e.updateFocus.bind(Object(c.a)(e)),e.updateResult=e.updateResult.bind(Object(c.a)(e)),e.updateVariables=e.updateVariables.bind(Object(c.a)(e)),e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleUnfocusedInput);var e=window.matchMedia("(max-width: 600px)");this.setMobile(e),e.addEventListener("change",this.setMobile)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleUnfocusedInput)}},{key:"executeExpression",value:function(){var e=this.state,t=e.calculation.expression,n=e.variables,s="",i=Object.assign({},n);try{s=Object(p.a)(t,i),function(e,t){var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!0;for(var i=0,r=n;i<r.length;i++){var a=r[i];if(e[a]!==t[a])return!0}return!1}(n,i)&&this.updateVariables(i),""!==s&&this.updateResult(s)}catch(r){console.error(r),this.throwMalformedError()}}},{key:"handleButtonPress",value:function(e){var t=this.state,n=t.calculation,s=n.expression,i=n.result,r=t.cursorIndex,a="";switch(e){case"back":break;case"clear":""!==i&&(this.updateCursorIndex(0),this.updateExpression(""));break;case"evaluate":this.executeExpression();break;case"alt-menu":case"menu":this.toggleMenu();break;default:a=document.getElementById(e).textContent,this.updateCursorIndex(r+a.length),this.updateExpression(s+a)}}},{key:"handleFocusedInput",value:function(e){this.updateExpression(e.target.value)}},{key:"handleUnfocusedInput",value:function(e){var t=e.key,n=this.state,s=n.calculation.result,i=n.isInputUnfocused;if("Enter"===t)if(""===s)document.getElementById("input").blur(),this.executeExpression();else{var r=s.toString();this.updateCursorIndex(r.length),this.updateExpression(r)}else if(function(e){return!["Shift","CapsLock","Control","Alt","Tab","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Insert","PageDown","PageUp","Pause","ScrollLock","NumLock","Escape","ArrowDown","ArrowUp"].includes(e)}(t)&&i){var a=this.state,u=a.calculation.expression,o=a.cursorIndex,c="";switch(t){case"Backspace":""!==s?(this.updateCursorIndex(0),this.updateExpression("")):0!==o&&(c=u.slice(0,o-1)+u.slice(o),this.updateCursorIndex(o-1),this.updateExpression(c));break;case"Delete":o!==u.length&&(c=u.slice(0,o)+u.slice(o+1),this.updateExpression(c));break;case"ArrowLeft":o>0&&this.updateCursorIndex(o-1),this.updateResult("");break;case"ArrowRight":o<u.length&&this.updateCursorIndex(o+1),this.updateResult("");break;case"Home":this.updateCursorIndex(0);break;case"End":this.updateCursorIndex(u.length);break;default:if(""===s)c=u.slice(0,o)+t+u.slice(o),this.updateCursorIndex(o+1),this.updateExpression(c);else{if(["0","1","2","3","4","5","6","7","8","9"].includes(t))this.updateCursorIndex(1),this.updateExpression(t);else c=s.toString()+t,this.updateCursorIndex(c.length),this.updateExpression(c)}}}}},{key:"restorePrevious",value:function(e){this.updateCursorIndex(e.length),this.updateExpression(e)}},{key:"setMobile",value:function(e){e.matches?this.setState({isMobile:!0}):this.setState({isMobile:!1})}},{key:"toggleMenu",value:function(){this.setState((function(e){return{altMenuToggled:!e.altMenuToggled}}))}},{key:"throwMalformedError",value:function(){this.setState((function(e){var t=e.calculation;return{calculation:Object.assign({},t,{isMalformed:!0})}}))}},{key:"updateCursorIndex",value:function(e){this.setState({cursorIndex:e})}},{key:"updateExpression",value:function(e){this.setState({calculation:{expression:e,isMalformed:!1,result:""}})}},{key:"updateFocus",value:function(e){this.setState((function(t){return{cursorIndex:e.target.selectionStart,isInputUnfocused:!t.isInputUnfocused}}))}},{key:"updateResult",value:function(e){this.setState((function(t){var n=t.calculation,s={isMalformed:!1,result:e};return{calculation:Object.assign({},n,s)}}))}},{key:"updateVariables",value:function(e){this.setState({variables:e})}},{key:"render",value:function(){var e=this.state,t=e.altMenuToggled,n=e.calculation,s=e.cursorIndex,i=e.isInputUnfocused,r=e.isMobile,a=n.expression,u=n.result;return Object(b.jsxs)("main",{id:"calculator",children:[Object(b.jsx)(v,{calculation:n,cursorIndex:s,isInputUnfocused:i,handleChange:this.handleFocusedInput,restorePrevious:this.restorePrevious,updateFocus:this.updateFocus}),Object(b.jsx)(x,{altMenuToggled:t,expression:a,isMobile:r,restorePrevious:this.restorePrevious,result:u}),Object(b.jsx)(y,{altMenuToggled:t,isMobile:r,sendButtonPress:this.handleButtonPress})]})}}]),n}(i.a.Component);a.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(I,{})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.6f7fac23.chunk.js.map