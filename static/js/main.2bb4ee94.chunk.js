(this["webpackJsonpjavascript-calculator"]=this["webpackJsonpjavascript-calculator"]||[]).push([[0],{58:function(e,t,s){},59:function(e,t,s){},60:function(e,t,s){},62:function(e,t,s){},63:function(e,t,s){},64:function(e,t,s){},65:function(e,t,s){},73:function(e,t){},74:function(e,t,s){"use strict";s.r(t);var i=s(22),n=s.n(i),a=s(34),r=s.n(a),o=(s(58),s(20)),c=s(35),l=s(36),u=s(21),d=s(52),h=s(51),p=s(76),x=s(2),b=(s(59),s(60),s(9)),j={zero:"0",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",decimal:".",add:"+",subtract:"-",divide:"/",multiply:"*",back:"Back",clear:"C","left-parenthesis":"(","right-parenthesis":")",exponential:"^",sqrt:"sqrt",equals:"=",evaluate:"Evaluate"},f={zero:"0",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",decimal:".",add:"+",subtract:"-",divide:"/",multiply:"*",clear:"C",back:"Back",exponential:"^",equals:"=",evaluate:"Evaluate",alt:"alt"},v={evaluate:"Evaluate",menu:"menu","left-parenthesis":"(","right-parenthesis":")",sqrt:"sqrt",u:"u",v:"v",x:"x",y:"z"};var g=function(e){var t=e.altMenuToggled,s=e.expression,i=e.isMobile,n=e.sendButtonPress,a=function(e,t){return t?e?v:f:j}(t,i),r={},o=function(e,t){return t?e?"mobile-alt-menu-grid":"mobile-menu-grid":"desktop-grid"}(t,i);return r.height=function(e,t){return t?e?"41.6%":"80%":"60%"}(t,i),Object(b.jsx)("div",{className:"button-container "+o,style:r,children:function(e){return Object.keys(e).map((function(t){if(e.hasOwnProperty(t)){var i=e[t],a="";switch("clear"===t&&""===s&&(t="all-clear",i="AC"),t){case"divide":a=Object(b.jsx)(b.Fragment,{children:"\xf7"});break;case"multiply":a=Object(b.jsx)(b.Fragment,{children:"\xd7"});break;case"subtract":a=Object(b.jsx)(b.Fragment,{children:"\u2212"});break;case"exponential":a=Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("pre",{children:["x",Object(b.jsx)("sup",{children:"n"})]})});break;case"sqrt":a=Object(b.jsx)(b.Fragment,{children:"\u221a"});break;case"back":a=Object(b.jsx)("i",{className:"fa fa-angle-double-left","aria-hidden":"true"});break;case"all-clear":a=Object(b.jsx)("i",{className:"fa fa-trash-o","aria-hidden":"true"});break;default:a=i}return Object(b.jsx)("button",{className:"calculatorButton",id:t,"button-text":i,onClick:function(e){return n(t,i)},children:a},t)}return null}))}(a)})};s(62),s(63);function m(e){var t=e.cursorIndex,s=e.expression,i=e.handleChange,n=e.isInputUnfocused;var a=function(e,t,s,i){var n={};return t&&(n.opacity=0),Object(b.jsx)("input",{style:n,type:"text",id:"input",value:e,onChange:s,onFocus:i,onBlur:i})}(s,n,i,e.updateFocus),r=function(e,t){var s=e.slice(0,t),i=e.slice(t);return Object(b.jsx)("div",{id:"unfocused-input-display",children:Object(b.jsxs)("pre",{children:[s,Object(b.jsx)("span",{id:"cursor",children:"|"}),i]})})}(s,t);return Object(b.jsxs)("div",{id:"input-container",children:[a,n&&r]})}function O(e){var t=e.calculation,s=t.expression,i=t.isMalformed,n=t.result,a=e.cursorIndex,r=e.handleChange,o=e.isInputUnfocused,c=e.restorePrevious,l=e.toggleTooltip,u=e.updateFocus;var d=function(e,t){return Object(b.jsxs)("div",{className:"result-container",children:[Object(b.jsx)("div",{className:"expression",onClick:function(){c(e)},children:Object(b.jsx)("p",{children:e})}),Object(b.jsx)("div",{className:"equals",children:"="}),Object(b.jsx)("div",{className:"result",onClick:function(){c(t.toString())},children:Object(b.jsx)("p",{children:t})})]})}(s,n);return Object(b.jsxs)("div",{id:"display",children:[Object(b.jsx)("p",{id:"display-title",children:"Display"}),Object(b.jsx)("button",{id:"display-tooltip",onClick:l,children:Object(b.jsx)("i",{className:"fa fa-info","aria-hidden":"true"})}),""===n&&Object(b.jsx)(m,{cursorIndex:a,expression:s,isInputUnfocused:o,isMalformed:i,handleChange:r,updateFocus:u}),i&&Object(b.jsx)("pre",{id:"malformed-expression",children:"Malformed expression"}),""!==n&&d]})}s(64);function y(e){var t=e.altMenuToggled,s=e.history,n=e.isMobile,a=e.restorePrevious;Object(i.useEffect)((function(){o()}),[s]),Object(i.useEffect)((function(){t&&o()}),[t]);var r=function(e){var t=parseInt(e,10);return s.filter((function(e){var s=e.id;return t===s}))[0]},o=function(){var e=document.getElementById("history-container");e.scrollTop=e.scrollHeight},c=function(e){try{var t=e.currentTarget.attributes["data-id"].nodeValue.replace("calculation",""),s=r(t).expression;a(s)}catch(i){console.error(i)}},l=function(e){try{var t=e.currentTarget.attributes["data-id"].nodeValue.replace("calculation",""),s=r(t).result;a(s.toString())}catch(i){console.error(i)}},u=s.map((function(e){return function(e,t){var s=e.id,i=e.expression,n=e.result,a="result-container";return a+=t?" result-container-mobile":" result-container-desktop",Object(b.jsxs)("div",{className:a,children:[Object(b.jsx)("div",{className:"expression","data-id":"calculation"+s,onClick:c,children:Object(b.jsx)("p",{children:i})}),Object(b.jsx)("div",{className:"equals",children:"="}),Object(b.jsx)("div",{className:"result","data-id":"calculation"+s,onClick:l,children:Object(b.jsx)("p",{children:n})})]},s)}(e,n)})),d={};return n?t?(d.order="2",d.height="38.4%"):d.display="none":(d.order="-1",d.height="20%"),Object(b.jsx)("div",{id:"history-container",style:d,children:u})}s(65);var k=function(e){var t=Object(b.jsx)("i",{className:"fa fa-long-arrow-right","aria-hidden":"true"});return Object(b.jsxs)("div",{id:"tooltip",children:[Object(b.jsx)("button",{id:"close-tooltip",onClick:e.toggleTooltip,children:Object(b.jsx)("i",{className:"fa fa-times","aria-hidden":"true"})}),Object(b.jsxs)("div",{className:"tip",children:[Object(b.jsx)("h2",{children:"What does Evaluate do?"}),Object(b.jsxs)("div",{className:"example",children:[Object(b.jsx)("p",{children:"Evaluate executes the expression in the display."}),Object(b.jsxs)("p",{children:["In what follows, we will use ",Object(b.jsx)("code",{children:t})," to mean evaluate"]}),Object(b.jsxs)("pre",{children:["4^2 ",t," 16"]})]})]}),Object(b.jsxs)("div",{className:"tip",children:[Object(b.jsx)("h2",{children:"What is the equals sign for?"}),Object(b.jsx)("p",{children:"The equals sign is not used to evaluate an expression. It is used for:"}),Object(b.jsxs)("div",{className:"example",children:[Object(b.jsx)("h3",{children:"Variable Assignment"}),Object(b.jsxs)("pre",{children:["x=7 ",t," 7"]}),Object(b.jsx)("p",{children:"Now we have a variable stored in memory with x set to 7. Therefore,"}),Object(b.jsxs)("pre",{children:["x+4 ",t," 11"]})]}),Object(b.jsxs)("div",{className:"example",children:[Object(b.jsx)("h3",{children:"Equality Comparison"}),Object(b.jsxs)("pre",{children:["7+3*4 == 7+12 ",t," true (1)"]}),Object(b.jsxs)("pre",{children:["3^3 == 2*3+35 ",t," false (0)"]})]})]})]})},I={expression:"",isMalformed:!1,result:""},E=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).state={altMenuToggled:!1,calculation:I,calculationCount:0,cursorIndex:0,isTooltipToggled:!1,history:[],isInputUnfocused:!0,isMobile:!1,variables:{}},e.handleButtonPress=e.handleButtonPress.bind(Object(u.a)(e)),e.handleFocusedInput=e.handleFocusedInput.bind(Object(u.a)(e)),e.handleUnfocusedInput=e.handleUnfocusedInput.bind(Object(u.a)(e)),e.restorePrevious=e.restorePrevious.bind(Object(u.a)(e)),e.setMobile=e.setMobile.bind(Object(u.a)(e)),e.toggleTooltip=e.toggleTooltip.bind(Object(u.a)(e)),e.updateFocus=e.updateFocus.bind(Object(u.a)(e)),e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleUnfocusedInput),this.mediaQuery=window.matchMedia("(max-width: 600px)"),this.setMobile(this.mediaQuery),this.mediaQuery.addEventListener("change",this.setMobile)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleUnfocusedInput),this.mediaQuery.removeEventListener("change",this.setMobile)}},{key:"clearMemory",value:function(){this.setState({calculation:I,calculationCount:0,cursorIndex:0,history:[],variables:{}})}},{key:"executeExpression",value:function(){var e=this.state,t=e.calculation.expression,s=e.variables,i="",n=Object.assign({},s);if(""!==t)try{i=Object(p.a)(t,n),function(e,t){var s=Object.keys(e),i=Object.keys(t);if(s.length!==i.length)return!0;for(var n=0,a=s;n<a.length;n++){var r=a[n];if(e[r]!==t[r])return!0}return!1}(s,n)&&this.updateVariables(n),i=Object(x.pc)(i,{precision:13}),this.submitResult(i.toString())}catch(a){console.error(a),this.throwMalformedError()}}},{key:"getPreviousCalculation",value:function(){this.setState((function(e){var t=e.calculation.result,s=e.history;if(""===t&&0!==s.length){var i=s.slice().pop();return{calculation:{expression:i.expression,isMalformed:!1,result:i.result}}}}))}},{key:"handleButtonPress",value:function(e,t){var s=this.state.calculation,i=s.expression,n=s.result,a="";switch(e){case"back":this.getPreviousCalculation();break;case"all-clear":this.clearMemory();break;case"clear":a=""!==n?"":i.replace(/([^\w]|\w+|sqrt\()$/,""),this.updateCursorIndex(a.length),this.updateExpression(a);break;case"evaluate":""===n?this.executeExpression():(a=n.toString(),this.updateCursorIndex(a.length),this.updateExpression(a));break;case"alt":case"menu":this.toggleMenu();break;case"sqrt":a=""===n?i+t+"(":t+"("+n+")",this.updateCursorIndex(a.length),this.updateExpression(a);break;case"left-parenthesis":a=""===n?i+t:t+n,this.updateCursorIndex(a.length),this.updateExpression(a);break;case"add":case"subtract":case"multiply":case"divide":case"exponential":a=""===n?i+t:n+t,this.updateCursorIndex(a.length),this.updateExpression(a);break;default:a=""===n?i+t:t,this.updateCursorIndex(a.length),this.updateExpression(a)}}},{key:"handleFocusedInput",value:function(e){this.updateExpression(e.target.value)}},{key:"handleUnfocusedInput",value:function(e){var t=e.key,s=this.state,i=s.calculation.result,n=s.isInputUnfocused;if(!s.isTooltipToggled)if("Enter"===t)if(""===i)"activeElement"in document&&document.activeElement.blur(),this.executeExpression();else{var a=i.toString();this.updateCursorIndex(a.length),this.updateExpression(a)}else if(function(e){return!["Shift","CapsLock","Control","Alt","Tab","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Insert","PageDown","PageUp","Pause","ScrollLock","NumLock","Escape","ArrowDown","ArrowUp"].includes(e)}(t)&&n){var r=this.state,o=r.calculation.expression,c=r.cursorIndex,l="";switch(t){case"Backspace":""!==i?(this.updateCursorIndex(0),this.updateExpression("")):0!==c&&(l=o.slice(0,c-1)+o.slice(c),this.updateCursorIndex(c-1),this.updateExpression(l));break;case"Delete":""!==i?(this.updateCursorIndex(0),this.updateExpression("")):c!==o.length&&(l=o.slice(0,c)+o.slice(c+1),this.updateExpression(l));break;case"ArrowLeft":c>0&&this.updateCursorIndex(c-1),this.updateExpression(o);break;case"ArrowRight":c<o.length&&this.updateCursorIndex(c+1),this.updateExpression(o);break;case"Home":this.updateCursorIndex(0),this.updateExpression(o);break;case"End":this.updateCursorIndex(o.length),this.updateExpression(o);break;default:if(""===i)l=o.slice(0,c)+t+o.slice(c),this.updateCursorIndex(c+1),this.updateExpression(l);else{if(["0","1","2","3","4","5","6","7","8","9"].includes(t))this.updateCursorIndex(1),this.updateExpression(t);else l=i.toString()+t,this.updateCursorIndex(l.length),this.updateExpression(l)}}}}},{key:"restorePrevious",value:function(e){this.updateCursorIndex(e.length),this.updateExpression(e)}},{key:"setMobile",value:function(e){e.matches?this.setState({isMobile:!0}):this.setState({isMobile:!1})}},{key:"submitResult",value:function(e){this.setState((function(t){var s=t.calculation,i={isMalformed:!1,result:e};return{calculation:Object.assign({},s,i)}})),this.updateHistory()}},{key:"toggleMenu",value:function(){this.setState((function(e){return{altMenuToggled:!e.altMenuToggled}}))}},{key:"toggleTooltip",value:function(){this.setState((function(e){return{isTooltipToggled:!e.isTooltipToggled}}))}},{key:"throwMalformedError",value:function(){this.setState((function(e){var t=e.calculation;return{calculation:Object.assign({},t,{isMalformed:!0})}}))}},{key:"updateCursorIndex",value:function(e){this.setState({cursorIndex:e})}},{key:"updateExpression",value:function(e){this.setState({calculation:{expression:e,isMalformed:!1,result:""}})}},{key:"updateFocus",value:function(e){this.setState((function(t){return{cursorIndex:e.target.selectionStart,isInputUnfocused:!t.isInputUnfocused}}))}},{key:"updateHistory",value:function(){this.setState((function(e){var t=e.calculation,s=t.expression,i=t.result,n=e.calculationCount,a=e.history,r=Object(o.a)(a);return r.push({id:n+1,expression:s,result:i}),r.length>20&&r.shift(),{history:r,calculationCount:n+1}}))}},{key:"updateVariables",value:function(e){this.setState({variables:e})}},{key:"render",value:function(){var e=this.state,t=e.altMenuToggled,s=e.calculation,i=e.cursorIndex,n=e.history,a=e.isInputUnfocused,r=e.isMobile,o=e.isTooltipToggled,c=s.expression;return Object(b.jsxs)("main",{id:"calculator",children:[o&&Object(b.jsx)(k,{toggleTooltip:this.toggleTooltip}),Object(b.jsx)(O,{calculation:s,cursorIndex:i,isInputUnfocused:a,handleChange:this.handleFocusedInput,restorePrevious:this.restorePrevious,toggleTooltip:this.toggleTooltip,updateFocus:this.updateFocus}),Object(b.jsx)(y,{altMenuToggled:t,history:n,isMobile:r,restorePrevious:this.restorePrevious}),Object(b.jsx)(g,{altMenuToggled:t,expression:c,isMobile:r,sendButtonPress:this.handleButtonPress})]})}}]),s}(n.a.Component);r.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(E,{})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.2bb4ee94.chunk.js.map